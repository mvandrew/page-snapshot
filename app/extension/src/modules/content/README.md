# Content модули

Модули, специфичные для content script, работающие в контексте веб-страниц.

## Модули

### ContentController (`content-controller.js`)
Главный координатор content script, управляет всеми остальными модулями.

**Функции:**
- Инициализация и управление модулями
- Обработка сообщений от popup и background
- Проверка конфигурации расширения
- Координация работы всех компонентов

### PageInfoCollector (`page-info-collector.js`)
Сбор и обработка информации о странице.

**Функции:**
- Получение HTML контента страницы
- Сбор метаданных страницы (viewport, scroll, timing)
- Валидация информации о странице
- Отслеживание изменений контента
- Создание статистики страницы

### AutoSaveManager (`auto-save-manager.js`)
Управление автоматическим сохранением контента.

**Функции:**
- Периодическое сохранение контента
- Проверка изменений перед сохранением
- Обработка ошибок сохранения с повторными попытками
- Управление настройками автоматического сохранения

### ElementHighlighter (`element-highlighter.js`)
Подсветка и навигация по элементам страницы.

**Функции:**
- Подсветка элементов по селектору
- Прокрутка к элементам
- Поиск элементов по тексту
- Создание CSS селекторов для элементов
- Управление визуальными эффектами

### NotificationManager (`notification-manager.js`)
Показ уведомлений пользователю на странице.

**Функции:**
- Различные типы уведомлений (success, error, warning, info, loading)
- Настраиваемые позиции и анимации
- Автоматическое скрытие уведомлений
- Управление множественными уведомлениями

### ContentProcessor (`content-processor.js`)
Обработка контента страниц для сохранения (legacy модуль).

**Функции:**
- Обработка и оптимизация контента
- Создание скриншотов
- Валидация размера контента
- Сжатие HTML контента

## Архитектура

```
ContentController (главный координатор)
├── PageInfoCollector (сбор информации)
├── AutoSaveManager (автосохранение)
├── ElementHighlighter (подсветка элементов)
├── NotificationManager (уведомления)
└── ContentProcessor (обработка контента)
```

## Принципы

- **Модульность**: Каждый модуль отвечает за свою область
- **Изоляция**: Работа в изолированном контексте страницы
- **Безопасность**: Безопасное взаимодействие с DOM
- **Производительность**: Минимальное влияние на производительность страницы
- **Совместимость**: Работа с различными типами страниц
- **Обработка ошибок**: Корректная обработка ошибок в контексте страницы
- **Расширяемость**: Легко добавлять новые модули

## Использование

### Инициализация
```javascript
// Модули загружаются автоматически через importScripts
const contentController = new ContentController();
```

### Доступ к модулям
```javascript
// Через главный контроллер
const pageInfo = contentController.modules.pageInfoCollector.getPageInfo();

// Напрямую (если модуль доступен)
const highlighter = new ElementHighlighter();
highlighter.highlightElement('#my-element');
```

### Обработка сообщений
Все сообщения от popup и background обрабатываются автоматически через ContentController.

## Ограничения

- Не может использовать Chrome Extension API напрямую
- Взаимодействие с background script только через сообщения
- Ограниченный доступ к файловой системе
- Зависит от контекста выполнения страницы
- Модули должны быть загружены через importScripts
